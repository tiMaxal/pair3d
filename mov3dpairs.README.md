# mov3dpairs

`mov3dpairs` is a Python utility with a Tkinter-based GUI that processes folders containing `_pairs` and `_singles` subfolders (typically generated by stereo image sorting tools like `pair3d`). It moves `_pairs` files to a duplicated folder structure (`_x2_[folder]`) and `_singles` files to their immediate parent directory in the source tree, then renames the source folder to `[source]_singles`. The tool includes a progress bar, pause/continue functionality, and logging.

## Features

- **Folder Processing**: Processes a selected folder and its subfolders, moving `_pairs` and `_singles` files.
- **Move to Parent Option**: When enabled, moves `_pairs` files to their immediate parent directory in the duplicated `_x2_[folder]` tree; otherwise, preserves the `_pairs` subfolder structure.
- **Source Folder Renaming**: Renames the source folder to `[source]_singles` after processing.
- **Progress Tracking**: Displays a progress bar, elapsed time, estimated remaining time, and file count (processed/total).
- **Pause/Continue**: Allows pausing and resuming the processing operation.
- **Logging**: Generates logs in both the application directory and the source folder for tracking operations.
- **Settings Persistence**: Saves the last selected folder for convenience.

## Requirements

- Python 3.x
- Required Python libraries:
  - `tkinter` (usually included with Python)
  - `shutil`, `os`, `threading`, `time`, `sys`, `json` (standard libraries)

## Installation

1. Ensure Python 3.x is installed on your system.
2. Clone or download the `mov3dpairs.py` script to your local machine.
3. No additional installation is required, as the script uses standard Python libraries.

## Usage

1. **Run the Script**:
   ```bash
   python mov3dpairs.py
   ```

2. **GUI Instructions**:
   - **Select Folder**: Click the "Browse" button to choose a folder containing `_pairs` and `_singles` subfolders.
   - **Move to Parent Option**: Check the "Move to Parent" checkbox to move `_pairs` files to their immediate parent directory in the `_x2_[folder]` tree. Uncheck to preserve the `_pairs` subfolder structure.
   - **View Contents**: The listbox displays images in the selected folder and subfolders, with a total image count shown above.
   - **Start Processing**: Click the "Start" button to begin moving files. The progress bar and labels will update to show progress, elapsed time, estimated remaining time, and file counts.
   - **Pause/Continue**: Click the "Pause" button to pause processing; it changes to "Continue" when paused. Click "Continue" to resume.
   - **Exit**: Click the "Exit" button to close the application. If processing is in progress, a confirmation dialog will appear.

3. **Output**:
   - `_pairs` files are moved to a new `_x2_[folder]` directory (either to the parent directory or a `_pairs` subfolder, based on the "Move to Parent" option).
   - `_singles` files are moved to their immediate parent directory in the source tree.
   - The source folder is renamed to `[source]_singles`.
   - Logs are saved in:
     - The application directory (`mov3dpairs_log.txt`).
     - The source folder (copied to `[source]_singles/mov3dpairs_log.txt`).

4. **Example**:
   - Input folder: `Photos`
   - If "Move to Parent" is checked:
     - `_pairs` files in `Photos/subdir/_pairs` move to `_x2_Photos/subdir`.
     - `_singles` files in `Photos/subdir/_singles` move to `Photos/subdir`.
   - If unchecked:
     - `_pairs` files in `Photos/subdir/_pairs` move to `_x2_Photos/subdir/_pairs`.
     - `_singles` files move as above.
   - Source folder renamed to `Photos_singles`.

## Notes

- **Existing Destination**: If the `_x2_[folder]` directory already exists, the script prompts to overwrite it.
- **Singles Folder Check**: If the source folder name ends with `_singles`, a warning prompts to confirm processing to avoid reprocessing.
- **Empty Folders**: Empty folders (or those containing only `.picasa.ini`) are automatically deleted after moving files.
- **Error Handling**: Errors during file operations or folder renaming are logged and displayed in a messagebox.

## License

This software is released under the MIT License. See the license header in `mov3dpairs.py` for details.

## Support

For issues or feature requests, please contact the developer or submit an issue on the project's repository (if available).